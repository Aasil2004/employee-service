<!-- Autogenerated guidance for AI coding assistants working in this repository. -->
# Project-specific Copilot Instructions

This file gives concise, actionable guidance for AI coding agents to be immediately productive in this repository.

## Big picture
- **Backend:** Spring Boot application in `src/main/java/com/example/payroll` (classic REST controllers + JPA). Key controllers: `EmployeeController` and `role/RoleController`.
- **Data model:** JPA entities `Employee` and `role/Role`. `Employee` has a `@ManyToOne` relation to `Role`.
- **Persistence:** Spring Data JPA repositories (`EmployeeRepository`, `role/RoleRepository`). DB configured in `src/main/resources/application.properties` (MySQL).
- **Frontend:** React app in `react-ui/` (CRA). Proxy set to `http://localhost:8080` in `react-ui/package.json` for local development.

## How this project runs (developer workflows)
- Start backend (default): `./mvnw spring-boot:run` (Windows: `mvnw.cmd spring-boot:run`) from the repository root `payroll/`.
- Start frontend: `cd react-ui && npm install && npm start`.
- Backend expects MySQL at `jdbc:mysql://localhost:3306/employeedb` (see `application.properties`). If DB is not available, set an in-memory DB or update properties.

## Coding patterns & conventions
- Controllers return domain entities directly (no DTO layer). Be conservative when changing response shapes — update both backend controllers and the React UI accordingly.
- When creating or updating an `Employee`, controllers expect the request body to include a `role` object with at least an `id`. The code resolves the `Role` by id (see `EmployeeController.newEmployee` and `replaceEmployee`).
- `CorsConfig` allows `http://localhost:3000` — keep in sync when changing frontend dev port.
- JPA uses `GenerationType.IDENTITY` for `Employee` and default `@GeneratedValue` for `Role` — migrations or schema changes should respect this strategy.

## Tests & build
- Unit tests live under `src/test/java/com/example/payroll/` and run with `./mvnw test` (Windows: `mvnw.cmd test`).
- CI (if added) should run `mvn -B -DskipTests=false verify` to catch build + test failures.

## Integration points & external dependencies
- MySQL database (credentials currently in `application.properties` — sensitive values should be rotated and moved to environment variables).
- Frontend talks to backend via proxied requests to `/employees` and `/roles`. See React `axios` usage in `react-ui/src/components/*`.

## Files to reference when making changes
- Backend entry: `src/main/java/com/example/payroll/PayrollApplication.java`.
- Controllers: `src/main/java/com/example/payroll/EmployeeController.java`, `src/main/java/com/example/payroll/role/RoleController.java`.
- Entities & Repos: `src/main/java/com/example/payroll/Employee.java`, `src/main/java/com/example/payroll/role/Role.java`, `*Repository.java` files.
- CORS config: `src/main/java/com/example/payroll/config/CorsConfig.java`.
- DB config: `src/main/resources/application.properties`.
- Frontend: `react-ui/package.json`, `react-ui/src/components/*` (UI expects REST endpoints matching controller mappings).

## Common, project-specific tasks for AI agents
- Adding a new field to `Employee`: update the `Employee` entity, repository is automatic, update `EmployeeController` methods to map the field as needed, and update all React components that render/manage employees (`react-ui/src/components/Employee*.js`).
- Changing `Role` lookup behavior: update `EmployeeController` to accept either a nested `role` object with `id` or a `roleId` primitive — update frontend calls accordingly.
- Local debugging: run backend with `mvnw.cmd spring-boot:run` and frontend with `npm start`. Use browser DevTools and backend logs (`spring.jpa.show-sql=true`) for SQL visibility.

## Safety & secrets
- `application.properties` currently contains DB credentials. Treat this as sensitive: prefer environment variables or `application-local.properties` excluded from VCS when making changes.

## Examples (copyable snippets)
- Start backend (Windows):

```
mvnw.cmd spring-boot:run
```

- Start frontend dev server:

```
cd react-ui
npm install
npm start
```

## When to ask the user
- If a change modifies JSON shapes returned by controllers, ask whether frontend updates are desired and whether to update tests.
- If DB credentials or schema changes are required, ask whether to use an in-memory DB for local runs or to provide new credentials.

If anything is unclear or you'd like more detail in any section (examples, endpoints list, or component mappings), tell me which part to expand.
